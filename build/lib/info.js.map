{"version":3,"sources":["../../src/lib/info.js"],"names":["REGISTRY","req","address","headers","Promise","r","j","opts","options","hostname","port","path","res","statusCode","on","err","end","program","url","p","status"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,WAAW,mCAAjB;;AAEA,MAAMC,MAAM,MAAOC,OAAP,IAAmB;AAC7B,QAAMC,UAAU,MAAM,IAAIC,OAAJ,CAAY,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAC1C,UAAMC,OAAO,gBAAML,OAAN,CAAb;AACA,UAAMM,UAAU;AACdC,gBAAUF,KAAKE,QADD;AAEdC,YAAMH,KAAKG,IAFG;AAGdC,YAAMJ,KAAKI,IAHG;AAIdR,eAAS;AACP,sBAAc;AADP;AAJK,KAAhB;AAQA,wBAAQK,OAAR,EAAkBI,GAAD,IAAS;AACxBP,QAAEO,IAAIC,UAAN;AACD,KAFD,EAGGC,EAHH,CAGM,OAHN,EAGgBC,GAAD,IAAS;AACpBT,QAAES,GAAF;AACD,KALH,EAMGC,GANH;AAOD,GAjBqB,CAAtB;AAkBA,SAAOb,OAAP;AACD,CApBD;;eAqBe,MAAOc,OAAP,IAAmB;AAChC,QAAMC,MAAO,GAAElB,QAAS,IAAGiB,OAAQ,EAAnC;AACA,QAAME,IAAIlB,IAAIiB,GAAJ,CAAV;AACA,QAAME,SAAS,MAAM,qBAAOD,CAAP,EAAU,IAAV,EAAgB,4BAAhB,CAArB;AACA,SAAOC,UAAU,GAAjB;AACD,C","sourcesContent":["import { request } from 'https'\nimport promto from 'promto'\nimport { parse } from 'url'\n\nconst REGISTRY = 'https://skimdb.npmjs.com/registry'\n\nconst req = async (address) => {\n  const headers = await new Promise((r, j) => {\n    const opts = parse(address)\n    const options = {\n      hostname: opts.hostname,\n      port: opts.port,\n      path: opts.path,\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Node.js) mnp/0.7.0',\n      },\n    }\n    request(options, (res) => {\n      r(res.statusCode)\n    })\n      .on('error', (err) => {\n        j(err)\n      })\n      .end()\n  })\n  return headers\n}\nexport default async (program) => {\n  const url = `${REGISTRY}/${program}`\n  const p = req(url)\n  const status = await promto(p, 5000, 'registry request timed out')\n  return status == 404\n}\n"],"file":"info.js"}