{"version":3,"sources":["../../src/lib/git.js"],"names":["git","args","cwd","noPipe","a","Array","isArray","split","promise","stdout","stderr","pipe","process","on","write","res"],"mappings":";;;;;;;AAAA;;;;AAEA;;;;;;AAMA,eAAeA,GAAf,CAAmBC,IAAnB,EAAyBC,GAAzB,EAA8BC,SAAS,KAAvC,EAA8C;AAC5C,MAAIC,CAAJ;;AACA,MAAIC,MAAMC,OAAN,CAAcL,IAAd,CAAJ,EAAyB;AACvBG,QAAIH,IAAJ;AACD,GAFD,MAEO,IAAI,OAAOA,IAAP,IAAe,QAAnB,EAA6B;AAClCG,QAAIH,KAAKM,KAAL,CAAW,GAAX,CAAJ;AACD;;AACD,QAAM;AAAEC,WAAF;AAAWC,UAAX;AAAmBC;AAAnB,MAA8B,2BAAM,KAAN,EAAaN,CAAb,EAAgBF,MAAM;AAAEA;AAAF,GAAN,GAAgB,EAAhC,CAApC;;AACA,MAAI,CAACC,MAAL,EAAa;AACXM,WAAOE,IAAP,CAAYC,QAAQH,MAApB;AACAC,WAAOC,IAAP,CAAYC,QAAQF,MAApB;AACD,GAHD,MAGO,IAAIP,UAAU,MAAd,EAAsB;AAC3BM,WAAOI,EAAP,CAAU,MAAV,EAAkB,MAAM;AACtBD,cAAQH,MAAR,CAAeK,KAAf,CAAqB,GAArB;AACD,KAFD;AAGAJ,WAAOG,EAAP,CAAU,MAAV,EAAkB,MAAM;AACtBD,cAAQH,MAAR,CAAeK,KAAf,CAAqB,GAArB;AACD,KAFD;AAGD;;AACD,QAAMC,MAAM,MAAMP,OAAlB;AACA,MAAIL,UAAU,MAAd,EAAsBS,QAAQH,MAAR,CAAeK,KAAf,CAAqB,IAArB;AACtB,SAAOC,GAAP;AACD;;eAEcf,G","sourcesContent":["import spawn from 'spawncommand'\n\n/**\n * Run a git command.\n * @param {string|string[]} args arguments to pass to git executable\n * @param {string} [cwd] working directory\n * @param {boolean} [noPipe=false] whether not to print to stdout and stderr\n */\nasync function git(args, cwd, noPipe = false) {\n  let a\n  if (Array.isArray(args)) {\n    a = args\n  } else if (typeof args == 'string') {\n    a = args.split(' ')\n  }\n  const { promise, stdout, stderr } = spawn('git', a, cwd ? { cwd } : {})\n  if (!noPipe) {\n    stdout.pipe(process.stdout)\n    stderr.pipe(process.stderr)\n  } else if (noPipe == 'dots') {\n    stdout.on('data', () => {\n      process.stdout.write('.')\n    })\n    stderr.on('data', () => {\n      process.stdout.write('.')\n    })\n  }\n  const res = await promise\n  if (noPipe == 'dots') process.stdout.write('\\n')\n  return res\n}\n\nexport default git\n"],"file":"git.js"}