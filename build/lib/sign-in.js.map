{"version":3,"sources":["../../src/lib/sign-in.js"],"names":["LOG","signIn","local","force","r","er","c","homedir","q","Object","keys","questions","reduce","a","k","v","o","defaultValue","conf"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,oBAAS,KAAT,CAAZ;;AAEe,eAAeC,MAAf,CAAsBC,QAAQ,KAA9B,EAAqCC,QAAQ,KAA7C,EAAoD;AACjE,MAAIC,CAAJ;;AACA,MAAGF,KAAH,EAAU;AACR,QAAI;AACFE,UAAI,MAAM,oBAAM,mBAAQ,kBAAR,EAAmB,QAAnB,CAAN,CAAV;AACD,KAFD,CAEE,OAAOC,EAAP,EAAW;AACXL,UAAI,oCAAJ;AACD;AACF,GARgE,CASjE;;;AACA;AACA,QAAMM,IAAI,EACR,IAAIJ,QAAQ;AAAEK,eAAS;AAAX,KAAR,GAA2B,EAA/B,CADQ;AAER,QAAIJ,QAAQ;AAAEA;AAAF,KAAR,GAAoB,EAAxB;AAFQ,GAAV;AAKA,QAAMK,IAAIJ,IAAIK,OAAOC,IAAP,CAAYC,kBAAZ,EAAuBC,MAAvB,CAA8B,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACpD,UAAMC,IAAIJ,mBAAUG,CAAV,CAAV;AACA,UAAME,IAAI,EACR,GAAGH,CADK;AAER,OAACC,CAAD,GAAK,EACH,GAAGC,CADA;AAEHE,sBAAcb,EAAEU,CAAF;AAFX;AAFG,KAAV;AAOA,WAAOE,CAAP;AACD,GAVa,EAUX,EAVW,CAAJ,GAUDL,kBAVT;AAYA;AACA,QAAMO,OAAO,MAAM,qBAAO,KAAP,EAAcV,CAAd,EAAiBF,CAAjB,CAAnB;AACA,SAAOY,IAAP;AACD","sourcesContent":["import africa from 'africa'\nimport bosom from 'bosom'\nimport questions from '../bin/questions'\nimport { homedir } from 'os'\nimport { resolve } from 'path'\nimport { debuglog } from 'util'\n\nconst LOG = debuglog('mnp')\n\nexport default async function signIn(local = false, force = false) {\n  let r\n  if(local) {\n    try {\n      r = await bosom(resolve(homedir(), '.mnprc'))\n    } catch (er) {\n      LOG('Could not read the global rc file.')\n    }\n  }\n  //\n  debugger\n  const c = {\n    ...(local ? { homedir: '.' } : {}),\n    ...(force ? { force } : {}),\n  }\n\n  const q = r ? Object.keys(questions).reduce((a, k) => {\n    const v = questions[k]\n    const o = {\n      ...a,\n      [k]: {\n        ...v,\n        defaultValue: r[k],\n      },\n    }\n    return o\n  }, {}) : questions\n\n  debugger\n  const conf = await africa('mnp', q, c)\n  return conf\n}\n"],"file":"sign-in.js"}