{"version":3,"sources":["../../src/bin/index.js"],"names":[],"mappings":"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","file":"bin/index.js","sourcesContent":["#!/usr/bin/env node\nimport { askSingle } from 'reloquent'\nimport argufy from 'argufy'\nimport getUsage from './usage'\nimport GitHub from '@rqt/github'\nimport signIn from '../lib/sign-in'\nimport { version } from '../../package.json'\nimport runCheck from './commands/check'\nimport runDelete from './commands/delete'\nimport runCreate from './commands/create'\n\nconst {\n  struct, help, name: _name, check: _check, delete: _delete, init, desc: _description,\n  version: _version,\n} = argufy({\n  struct: 's',\n  help: { short: 'h', boolean: true },\n  desc: { short: 'D' },\n  name: { command: true },\n  version: { short: 'v', boolean: true },\n  check: { short: 'c', boolean: true },\n  delete: { short: 'd', boolean: true },\n  init: { short: 'I', boolean: true },\n})\n\nif (_version) {\n  console.log(version)\n  process.exit()\n} else if (help) {\n  const u = getUsage()\n  console.log(u)\n  process.exit()\n}\n\nconst getName = async (name) => {\n  if (name) return name\n  const res = await askSingle({\n    text: 'Package name',\n    validation(a) {\n      if (!a) throw new Error('You must specify the package name.')\n    },\n  })\n  return res\n}\n\n(async () => {\n  try {\n    if (init) return signIn(true)\n\n    const name = await getName(_name)\n\n    if (_check) return runCheck(name)\n\n    const { token, ...settings } = await signIn()\n    const github = new GitHub(token)\n\n    if (_delete) return runDelete(github, settings.org, name)\n\n    await runCreate(settings, {\n      name,\n      struct,\n      github,\n      description: _description,\n    })\n  } catch ({ controlled, message, stack }) {\n    if (/Must have admin rights to Repository/.test(message)) {\n      console.log('Does your GitHub access token have \"delete\" rights?')\n    }\n    if (controlled) {\n      console.error(message)\n    } else {\n      console.error(stack)\n    }\n  }\n})()"]}